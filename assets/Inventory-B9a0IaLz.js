import{a as I,j as t,R as U,A as Y,b as G,u as H,r as m,G as J,P as Q,H as X,J as z,K,L as Z,N as W,O as ee,Q as te,S as se,q as h,D as y,U as b,Y as j,Z as v,_ as g,$ as w,a0 as E}from"./index-iVqpNyTX.js";const ae=new Map(Y.map(r=>[r.id,r])),re=U.memo(({cosmetic:r})=>{switch(r.type){case"piece":{const s=r.item.component;return t.jsx(s,{className:"w-full h-full text-cyan-300"})}case"avatar":return t.jsx("img",{src:r.item.url,alt:r.name,className:"w-full h-full rounded-md object-cover bg-slate-700"});case"emoji":return t.jsx("span",{className:"text-3xl",children:r.item.emoji});case"animated_emoji":return t.jsx("img",{src:r.item.url,alt:r.name,className:"w-full h-full"});case"theme":{const s=r.item;return t.jsx("div",{className:`w-full h-full rounded-md flex items-center justify-center p-1 bg-cover bg-center ${s.boardBg}`,style:s.boardBgImage?{backgroundImage:`url(${s.boardBgImage})`}:{},children:t.jsx("div",{className:`w-8 h-8 rounded-sm ${s.cellBg} border ${s.gridColor}`})})}case"board":{const s=r.item;return t.jsx("div",{className:"w-full h-full rounded-sm border-2",style:{backgroundColor:s.style.backgroundColor,borderColor:s.style.borderColor}})}case"effect":{const s=r.item.previewComponent;return t.jsx("div",{className:"w-full h-full flex items-center justify-center text-cyan-300",children:t.jsx(s,{})})}case"victory":{const s=r.item.previewComponent;return t.jsx("div",{className:"w-full h-full flex items-center justify-center text-cyan-300",children:t.jsx(s,{})})}case"boom":{const s=r.item.previewComponent;return t.jsx("div",{className:"w-full h-full flex items-center justify-center text-cyan-300",children:t.jsx(s,{})})}default:return t.jsx("span",{className:"text-3xl",children:"🎁"})}}),ie=({gifts:r,onClaim:s})=>{const i=r.filter(l=>!l.isClaimed),{playSound:p}=I();if(i.length===0)return t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-slate-400 text-lg",children:"Your locker is empty."}),t.jsx("p",{className:"text-slate-500",children:"Gifts you receive from friends will appear here."})]});const x=l=>{p("confirm"),s(l)};return t.jsx("div",{className:"space-y-4",children:i.map(l=>{const n=ae.get(l.cosmeticId);return n?t.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 flex-shrink-0 flex items-center justify-center bg-slate-700 rounded-md",children:t.jsx(re,{cosmetic:n})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-white",children:n.name}),t.jsxs("p",{className:"text-xs text-slate-400",children:["From: ",t.jsx("span",{className:"font-medium text-slate-300",children:l.fromName})]})]})]}),t.jsx("button",{onClick:()=>x(l),className:"bg-green-500 text-black font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition-colors",children:"Claim"})]},l.id):null})})},oe=({onBack:r})=>{const{user:s}=G(),{gameState:i,equipPiece:p,equipAvatar:x,equipTheme:l,equipEffect:n,equipVictoryEffect:T,equipBoomEffect:k,equipBoard:S,claimGift:A}=H(),{playSound:F}=I(),[o,_]=m.useState("Skins"),[L,B]=m.useState([]),[C,N]=m.useState(10);m.useEffect(()=>{N(10)},[o]),m.useEffect(()=>{if(!s)return;const e=J(s.uid,B);return()=>e()},[s]);const D={Skins:"piece",Avatars:"avatar",Emojis:"emoji",Themes:"theme",Boards:"board",Effects:"effect",Victory:"victory",Booms:"boom",Locker:"locker"},P=[...Q.map(e=>({id:e.id,name:e.name,type:"piece",price:0,item:e})),...X.map(e=>({id:e.id,name:e.name,type:"avatar",price:0,item:e})),...z.map(e=>({id:e.id,name:e.name,type:"emoji",price:0,item:e})),...K.map(e=>({id:e.id,name:e.name,type:"animated_emoji",price:0,item:e})),...Z.map(e=>({id:e.id,name:e.name,type:"theme",price:0,item:e})),...W.map(e=>({id:e.id,name:e.name,type:"board",price:0,item:e})),...ee.map(e=>({id:e.id,name:e.name,type:"effect",price:0,item:e})),...te.map(e=>({id:e.id,name:e.name,type:"victory",price:0,item:e})),...se.map(e=>({id:e.id,name:e.name,type:"boom",price:0,item:e})),{id:h.id,name:h.name,type:"piece",price:0,item:h},{id:y.id,name:y.name,type:"piece",price:0,item:y},{id:b.id,name:b.name,type:"avatar",price:0,item:b},{id:j.id,name:j.name,type:"theme",price:0,item:j},{id:v.id,name:v.name,type:"board",price:0,item:v},{id:g.id,name:g.name,type:"effect",price:0,item:g},{id:w.id,name:w.name,type:"victory",price:0,item:w},{id:E.id,name:E.name,type:"boom",price:0,item:E}],c=new Map;P.forEach(e=>{c.has(e.id)||c.set(e.id,e)});const M=i.ownedCosmeticIds.map(e=>c.get(e)).filter(e=>e!==void 0),O=Object.keys(i.emojiInventory).map(e=>c.get(e)).filter(e=>e!==void 0&&(i.emojiInventory[e.id]||0)>0),q=[...M,...O],u=Array.from(new Map(q.map(e=>[e.id,e])).values()).filter(e=>o==="Emojis"?e.type==="emoji"||e.type==="animated_emoji":e.type===D[o]),$=e=>{switch(e.type){case"piece":{const a=e.item.component;return t.jsx(a,{className:"w-16 h-16 text-cyan-300"})}case"avatar":return t.jsx("img",{src:e.item.url,alt:e.name,className:"w-16 h-16 rounded-full object-cover bg-slate-700"});case"emoji":return t.jsx("span",{className:"text-4xl",children:e.item.emoji});case"animated_emoji":return t.jsx("img",{src:e.item.url,alt:e.name,className:"w-16 h-16"});case"theme":{const a=e.item;return t.jsx("div",{className:`w-16 h-16 rounded-md flex items-center justify-center p-2 bg-cover bg-center ${a.boardBg}`,style:a.boardBgImage?{backgroundImage:`url(${a.boardBgImage})`}:{},children:t.jsx("div",{className:`w-10 h-10 rounded ${a.cellBg} border-2 ${a.gridColor}`})})}case"board":{const a=e.item;return t.jsx("div",{className:"w-16 h-16 rounded-md flex items-center justify-center p-1 border-2",style:{backgroundColor:a.style.backgroundColor,borderColor:a.style.borderColor,boxShadow:a.style.boxShadow},children:t.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-px bg-slate-500/50 p-px",children:Array(9).fill(0).map((f,d)=>t.jsx("div",{className:"bg-slate-800/50"},d))})})}case"effect":{const a=e.item.previewComponent;return t.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-cyan-300",children:t.jsx(a,{})})}case"victory":{const a=e.item.previewComponent;return t.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-cyan-300",children:t.jsx(a,{})})}case"boom":{const a=e.item.previewComponent;return t.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-cyan-300",children:t.jsx(a,{})})}default:return null}},V=()=>o==="Locker"?t.jsx(ie,{gifts:L,onClaim:A}):u.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:u.slice(0,C).map(e=>{const a=e.type==="piece"?i.activePieceX.id===e.id:e.type==="avatar"?i.activeAvatar.id===e.id:e.type==="theme"?i.activeTheme.id===e.id:e.type==="board"?i.activeBoard.id===e.id:e.type==="effect"?i.activeEffect.id===e.id:e.type==="victory"?i.activeVictoryEffect.id===e.id:e.type==="boom"?i.activeBoomEffect.id===e.id:!1,f=e.type==="emoji"||e.type==="animated_emoji",d=i.emojiInventory[e.id]||0,R=()=>{F("select"),e.type==="piece"?p(e.item):e.type==="avatar"?x(e.item):e.type==="theme"?l(e.item):e.type==="board"?S(e.item):e.type==="effect"?n(e.item):e.type==="victory"?T(e.item):e.type==="boom"&&k(e.item)};return t.jsxs("div",{className:"relative bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-4 flex flex-col items-center text-center transition-all duration-300 hover:border-cyan-400 hover:shadow-lg hover:shadow-cyan-500/10",children:[f&&d>0&&t.jsx("div",{className:"absolute top-1 right-1 bg-blue-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center border-2 border-slate-800",children:d}),t.jsx("div",{className:"h-24 w-24 mb-3 flex items-center justify-center bg-slate-900/70 rounded-lg p-2",children:$(e)}),t.jsx("h3",{className:"text-md font-semibold text-white mb-2 h-10 flex items-center justify-center",children:e.name}),f?t.jsxs("div",{className:"w-full mt-auto py-2 px-3 rounded-lg text-sm font-semibold bg-slate-600 text-slate-300 cursor-default flex items-center justify-center gap-2",children:[t.jsx("span",{children:"Quantity:"}),t.jsx("span",{className:"font-bold text-white",children:d})]}):t.jsx("button",{onClick:R,disabled:a,className:`w-full mt-auto py-2 px-3 rounded-lg text-sm font-semibold transition-all ${a?"bg-green-500 text-white cursor-not-allowed":"bg-cyan-500 hover:bg-cyan-400 text-black"}`,children:a?"Equipped":"Equip"})]},e.id)})}),u.length>C&&t.jsx("div",{className:"text-center mt-6",children:t.jsx("button",{onClick:()=>N(e=>e+10),className:"bg-slate-700 text-slate-300 text-sm px-4 py-2 rounded-full hover:bg-slate-600 transition-colors",children:"Load More"})})]}):t.jsxs("div",{className:"text-center py-16",children:[t.jsx("p",{className:"text-slate-400 text-lg",children:"You don't own any items in this category yet."}),t.jsx("p",{className:"text-slate-500",children:"Visit the shop to get some!"})]});return t.jsxs("div",{className:"p-4 sm:p-8 h-screen bg-slate-900 text-white relative flex flex-col",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22%231e293b%22%20fill-opacity%3D%220.4%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M0%2040L40%200H20L0%2020M40%2040V20L20%2040%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E')] opacity-50"}),t.jsxs("div",{className:"max-w-6xl mx-auto relative z-10 w-full flex flex-col flex-grow overflow-hidden",children:[t.jsx("header",{className:"flex-shrink-0",children:t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-4xl font-bold text-cyan-400",children:"Inventory"}),t.jsx("button",{onClick:r,className:"bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Back"})]})}),t.jsx("div",{className:"flex-shrink-0 mb-8 border-b border-slate-700",children:t.jsx("nav",{className:"flex space-x-1 sm:space-x-2 md:space-x-4 overflow-x-auto pb-px scrollbar-hide",children:["Skins","Avatars","Emojis","Themes","Boards","Effects","Victory","Booms","Locker"].map(e=>t.jsx("button",{onClick:()=>_(e),className:`py-2 px-3 text-base sm:text-lg font-semibold transition-colors whitespace-nowrap ${o===e?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-white"}`,children:e},e))})}),t.jsx("main",{className:"flex-grow overflow-y-auto pr-2 -mr-2 scrollbar-hide",children:V()})]})]})};export{oe as default};
