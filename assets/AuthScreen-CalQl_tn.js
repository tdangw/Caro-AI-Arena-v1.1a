import{r as t,a as Y,j as e,M as z,a1 as B,a2 as g,a3 as H,a4 as v,a5 as K,a6 as G,a7 as Q,a8 as $,a9 as J}from"./index-iVqpNyTX.js";const _=()=>{const[a,N]=t.useState(!0),[D,k]=t.useState(!1),[l,p]=t.useState(""),[f,C]=t.useState(""),[S,P]=t.useState(""),[F,L]=t.useState(""),[m,r]=t.useState(null),[E,h]=t.useState(null),[d,i]=t.useState(!1),[b,A]=t.useState(!1),[I,w]=t.useState(!1),[x,T]=t.useState(!1),{playSound:c}=Y();t.useEffect(()=>{if(!a){const s=l.split("@")[0];L(s)}},[l,a]);const y=()=>{r(null),h(null),p(""),C(""),P(""),L(""),A(!1)},M=async s=>{s.preventDefault(),i(!0),r(null),h(null),c("select");try{if(a){let o=l;l.includes("@")||(o=`${l}@gmail.com`),await H(g,o,f),await v()}else{if(!b)throw new Error("You must agree to the Terms of Service.");const o=["@gmail.com","@yahoo.com","@hotmail.com","@outlook.com"],n=l.indexOf("@");if(n===-1)throw new Error("Please enter a valid email address.");const W=l.substring(n);if(!o.some(R=>W.toLowerCase().endsWith(R)))throw new Error("Invalid email provider. Please use Gmail, Yahoo, Hotmail, or Outlook.");const u=S.trim();if(u.length<3||u.length>15)throw new Error("Display Name must be between 3 and 15 characters.");if(await K(u))throw new Error("Display Name is already taken. Please choose another one.");const j=await G(g,l,f);await v(),j.user&&(await Q(j.user,{displayName:u}),await $(j.user,u))}}catch(o){let n=o.message||"An unknown error occurred.";n.includes("auth/invalid-credential")?n="Invalid email/username or password.":n.includes("auth/email-already-in-use")?n="This email is already registered. Please log in instead.":n.includes("auth/invalid-email")?n="Please enter a valid email address.":n.includes("auth/weak-password")&&(n="Password should be at least 6 characters."),r(n)}finally{i(!1)}},V=async s=>{s.preventDefault(),i(!0),r(null),h(null),c("select");try{await B(g,l),h("Password reset email sent! Check your inbox.")}catch(o){o.code==="auth/invalid-email"?r("Please enter a valid email address."):r("Failed to send reset email. Please check if the email is correct.")}finally{i(!1)}},q=async()=>{i(!0),r(null),c("confirm");try{await J(g),await v()}catch(s){r(s.message||"Could not sign in as guest.")}finally{i(!1)}},O=()=>e.jsxs("div",{className:"w-full max-w-md bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8 z-10 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-bold text-cyan-400 text-center mb-2",children:"Caro AI Arena"}),e.jsx("p",{className:"text-slate-400 text-center mb-8",children:"Reset Your Password"}),e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",value:l,onChange:s=>p(s.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0}),m&&e.jsx("p",{className:"text-red-500 text-sm",children:m}),E&&e.jsx("p",{className:"text-green-400 text-sm",children:E}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-3 rounded-lg transition-all disabled:bg-slate-600 disabled:cursor-not-allowed",children:d?"Sending...":"Send Reset Link"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:()=>{c("select"),k(!1),N(!0),y()},className:"text-cyan-400 hover:underline",children:"Back to Log In"})})]}),U=()=>e.jsxs("div",{className:"w-full max-w-md bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8 z-10 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-bold text-cyan-400 text-center mb-2",children:"Caro AI Arena"}),e.jsx("p",{className:"text-slate-400 text-center mb-8",children:a?"Log in to continue":"Create an account"}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[!a&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",placeholder:"Display Name",value:S,onChange:s=>P(s.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,minLength:3,maxLength:15}),e.jsx("input",{type:"text",placeholder:"Username",value:F,readOnly:!0,className:"w-full bg-slate-800 border border-slate-600 rounded-md px-4 py-3 text-slate-400 focus:outline-none cursor-not-allowed"})]}),e.jsx("input",{type:"text",placeholder:a?"Email or Username":"Email",value:l,onChange:s=>p(s.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",placeholder:"Password",value:f,onChange:s=>C(s.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>T(!x),className:"absolute inset-y-0 right-0 px-3 flex items-center text-slate-400 hover:text-white","aria-label":x?"Hide password":"Show password",children:x?e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a10.05 10.05 0 015.353-5.353m-2.43-2.43A12.034 12.034 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.05 10.05 0 01-2.015 3.999m-2.228-2.228a3 3 0 11-4.242-4.242"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3l18 18"})]}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542 7z"})]})})]}),a&&e.jsx("div",{className:"text-right -mt-4",children:e.jsx("div",{className:"text-sm",children:e.jsx("button",{type:"button",onClick:()=>{c("select"),k(!0),y()},className:"font-medium text-cyan-400 hover:underline",children:"Forgot Password?"})})}),!a&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"terms",checked:b,onChange:s=>A(s.target.checked),className:"w-4 h-4 rounded bg-slate-700 border-slate-600 focus:ring-cyan-500 text-cyan-500"}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-slate-400",children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:()=>w(!0),className:"text-cyan-400 hover:underline font-semibold",children:"Terms of Service"})]})]}),m&&e.jsx("p",{className:"text-red-500 text-sm",children:m}),e.jsx("button",{type:"submit",disabled:d||!a&&!b,className:"w-full bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-3 rounded-lg transition-all disabled:bg-slate-600 disabled:cursor-not-allowed",children:d?"Processing...":a?"Log In":"Sign Up"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:()=>{c("select"),N(!a),y()},className:"text-cyan-400 hover:underline",children:a?"Need an account? Sign Up":"Already have an account? Log In"})}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center my-8",children:[e.jsx("hr",{className:"flex-grow border-slate-600"}),e.jsx("span",{className:"px-4 text-slate-400",children:"OR"}),e.jsx("hr",{className:"flex-grow border-slate-600"})]}),e.jsx("button",{onClick:q,disabled:d,className:"w-full bg-slate-600 hover:bg-slate-500 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:"Continue as Guest"})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-slate-900 text-white p-4 flex flex-col items-center justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22%231e293b%22%20fill-opacity%3D%220.4%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M0%2040L40%200H20L0%2020M40%2040V20L20%2040%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E')] opacity-50"}),D?O():U(),e.jsx("style",{children:`
            @keyframes fade-in-up {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
        `})]}),e.jsx(z,{isOpen:I,onClose:()=>w(!1),title:"Quy định sử dụng",children:e.jsxs("div",{className:"text-slate-300 space-y-2 max-h-[60vh] overflow-y-auto pr-2 scrollbar-hide",children:[e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsx("li",{children:"Hãy tử tế và lịch sự."}),e.jsx("li",{children:"Tránh lời nói khó chịu hoặc bắt nạt."}),e.jsx("li",{children:"Không đăng quảng cáo hoặc tin rác."}),e.jsx("li",{children:"Tôn trọng quyền riêng tư của mọi người."}),e.jsx("li",{children:"Không chia sẻ tài khoản cho người khác."}),e.jsx("li",{children:"Không sử dụng cheat, hack, hay phần mềm gian lận."}),e.jsx("li",{children:"Không phát tán thông tin cá nhân của người khác."}),e.jsx("li",{children:"Caro AI Arena có quyền xóa tài khoản vi phạm mà không cần báo trước."})]}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx("button",{onClick:()=>w(!1),className:"bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-2 px-4 rounded-lg transition-colors",children:"Đã hiểu"})})]})})]})};export{_ as default};
